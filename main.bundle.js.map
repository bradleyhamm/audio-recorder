{"version":3,"sources":["/home/brad/Projects/audio-recorder/src/$_lazy_route_resource lazy","/home/brad/Projects/audio-recorder/src/app/app.component.css","/home/brad/Projects/audio-recorder/src/app/app.component.html","/home/brad/Projects/audio-recorder/src/app/app.component.ts","/home/brad/Projects/audio-recorder/src/app/app.module.ts","/home/brad/Projects/audio-recorder/src/app/preview.service.ts","/home/brad/Projects/audio-recorder/src/app/recorder.service.ts","/home/brad/Projects/audio-recorder/src/environments/environment.ts","/home/brad/Projects/audio-recorder/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_lazy_route_resource lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/brad/Projects/audio-recorder/src/$$_lazy_route_resource lazy\n// module id = ../../../../../src/$$_lazy_route_resource lazy recursive\n// module chunks = main","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"button.record {\\n  position: fixed;\\n  right: 35px;\\n  bottom: 35px;\\n}\\n.no-recordings-message {\\n  font-style: italic;\\n  color: #777;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/brad/Projects/audio-recorder/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = main","module.exports = \"<mat-card>\\n  <mat-card-content>\\n    <mat-card-title>Recordings</mat-card-title>\\n    <mat-list *ngIf=\\\"recordings.length\\\">\\n      <mat-list-item *ngFor=\\\"let recording of recordings\\\">\\n        {{ recording.title }}\\n        <a [href]=\\\"recording.downloadURL\\\" target=\\\"_blank\\\" mat-icon-button\\n          [download]=\\\"recording.filename\\\">\\n          <mat-icon matListIcon>file_download</mat-icon>\\n        </a>\\n        <button (click)=\\\"previewStart(recording)\\\" mat-icon-button\\n          *ngIf=\\\"!recording.isPlaying\\\">\\n          <mat-icon matListIcon>play_arrow</mat-icon>\\n        </button>\\n        <button (click)=\\\"previewStop()\\\" mat-icon-button\\n          *ngIf=\\\"recording.isPlaying\\\">\\n          <mat-icon matListIcon>stop</mat-icon>\\n        </button>\\n      </mat-list-item>\\n    </mat-list>\\n    <p *ngIf=\\\"!recordings.length\\\" class=\\\"no-recordings-message\\\">No recordings</p>\\n  </mat-card-content>\\n</mat-card>\\n\\n<button mat-fab class=\\\"record\\\" *ngIf=\\\"!isRecording\\\" (click)=\\\"startRecording()\\\">\\n  <mat-icon>mic</mat-icon>\\n</button>\\n<button mat-fab class=\\\"record\\\" *ngIf=\\\"isRecording\\\" (click)=\\\"stopRecording()\\\">\\n  <mat-icon>stop</mat-icon>\\n</button>\\n\\n<audio></audio>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/brad/Projects/audio-recorder/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","import { Component, NgZone } from '@angular/core';\nimport { RecorderService } from './recorder.service';\nimport { PreviewService } from './preview.service';\nimport { DomSanitizer } from '@angular/platform-browser';\n\ninterface Recording {\n  url: string,\n  downloadURL: string,\n  title: string,\n  filename: string,\n  isPlaying: boolean\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'app';\n  isRecording = false;\n  recordings = [];\n\n  constructor(\n    private recorderService: RecorderService,\n    private previewService: PreviewService,\n    private _ngZone: NgZone,\n    private sanitizer: DomSanitizer\n  ) { }\n\n  ngOnInit() {\n    this.getRecordings();\n  }\n\n  ngOnDestroy() {\n    // Unsubscribe from recording observable\n  }\n\n  public startRecording() {\n    this.isRecording = true;\n    this.recorderService.start();\n  }\n\n  public stopRecording() {\n    this.isRecording = false;\n    this.recorderService.stop();\n  }\n\n  public getRecordings() {\n    let count = 1;\n    this.recorderService.getRecordings().subscribe((url: string) => {\n      this._ngZone.run(() => {\n        let recording = {\n          url: url,\n          title: 'Audio #' + count,\n          filename: 'audio-' + count + '-' + new Date().toJSON().replace(/\\..+$/, ''),\n          downloadURL: this.sanitizer.bypassSecurityTrustResourceUrl(url),\n          isPlaying: false\n        };\n        this.recordings.push(recording);\n        count++;\n      });\n    });\n  }\n\n  public previewStart(recording) {\n    this.previewStop();\n    recording.isPlaying = true;\n    this.previewService.play(recording.url, () => {\n      recording.isPlaying = false;\n    });\n  }\n\n  public previewStop() {\n    this.recordings.forEach((recording) => {\n      if (recording.isPlaying) {\n        recording.isPlaying = false;\n        this.previewService.stop();\n      }\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatButtonModule, MatIconModule } from '@angular/material';\nimport { MatListModule } from '@angular/material/list';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { AppComponent } from './app.component';\nimport { RecorderService } from './recorder.service';\nimport { PreviewService } from './preview.service';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    NoopAnimationsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatListModule,\n    MatCardModule\n  ],\n  providers: [RecorderService, PreviewService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/app/app.module.ts","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class PreviewService {\n\n  private player: HTMLAudioElement\n\n  constructor() {}\n\n  private getPlayer() {\n    return document.querySelector('audio');\n  }\n\n  public play(url: string, onend: Function) {\n    let player = this.getPlayer();\n    player.src = url;\n    player.addEventListener('loadedmetadata', (e) => {\n      player.play();\n    });\n    player.addEventListener('ended', (e) => {\n      this.stop();\n      player.currentTime = 0;\n      onend();\n    });\n  }\n\n  public stop() {\n    this.getPlayer().pause();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/app/preview.service.ts","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\n\ndeclare var MediaRecorder: any;\n\n@Injectable()\nexport class RecorderService {\n\n  private audioTrack: MediaStreamTrack;\n  private subject: Subject<Object>;\n  private blob: Blob;\n  private recorder: any;\n\n  constructor() {}\n\n  ngOnInit() {\n    if (!this.isSupported()) {\n      window.alert('Audio recording is not supported');\n    }\n  }\n\n  public start() {\n    navigator.mediaDevices.getUserMedia({audio: true}).then((stream: MediaStream) => {\n      let chunks = [];\n      this.audioTrack = stream.getAudioTracks()[0];\n      this.recorder = new MediaRecorder(stream, {});\n      this.recorder.ondataavailable = (e: any) => {\n        chunks.push(e.data);\n        if (this.recorder.state === 'inactive') {\n          this.addRecording(new Blob(chunks, {type: 'audio/webm'}));\n        }\n      }\n      this.recorder.start(1000);\n    });\n  }\n\n  public stop() {\n    this.recorder.stop();\n    this.audioTrack.stop();\n  }\n\n  public isSupported(): Boolean {\n    return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n  }\n\n  public getRecordings() {\n    this.subject = new Subject();\n    return this.subject;\n  }\n\n  private addRecording(blob: Blob) {\n    let url = URL.createObjectURL(blob);\n    this.subject.next(url);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/app/recorder.service.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n\n\n// WEBPACK FOOTER //\n// /home/brad/Projects/audio-recorder/src/main.ts"],"sourceRoot":"webpack:///"}